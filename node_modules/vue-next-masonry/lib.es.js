import{defineComponent as t,h as e}from"vue";function r(t,e){if(parseInt(t,10)>-1)return t;if("object"!=typeof t)return 0;let r=1/0,i=t.default||0;return Object.entries(t).forEach((([t,n])=>{const s=parseInt(t,10),l=n,a=parseInt(l,10);if(Number.isNaN(s)||Number.isNaN(a))return;e<=s&&s<r&&(r=s,i=l)})),i}var i=t({props:{tag:{type:[String],default:"div"},cols:{type:[Object,Number,String],default:2},gutter:{type:[Object,Number,String],default:0},css:{type:[Boolean],default:!0},columnTag:{type:[String],default:"div"},columnClass:{type:[String,Array,Object],default:()=>[]},columnAttr:{type:[Object],default:()=>{}},resolveSlot:{type:Boolean,default:!1}},data:()=>({wrapperWidth:0,displayColumns:2,displayGutter:0}),activated(){this.$nextTick(this.render)},mounted(){window.addEventListener("resize",this.render),this.$nextTick(this.render)},updated(){this.$nextTick(this.render)},unmounted(){window.removeEventListener("resize",this.render)},methods:{render(){const t=(null==window?void 0:window.innerWidth)||1/0,{wrapperWidth:e}=this;e!==t&&(this.wrapperWidth=t,this.calculateColumnCount(this.wrapperWidth),this.calculateGutterSize(this.wrapperWidth))},calculateGutterSize(t){this.displayGutter=r(this.gutter,t)},calculateColumnCount(t){let e=r(this.cols,t)||0;e=Math.max(1,Number(e)),this.displayColumns=e},getColumnsWithChildItems(){var t,e,r;const i=[],n=null==(e=(t=this.$slots).default)?void 0:e.call(t);let s=[];if(n.length>1?s=n:(s=n[0].children,1===s.length&&this.resolveSlot&&(s=(null==(r=s[0])?void 0:r.children)||[])),0===s.length)return[];for(let l=0,a=0;l<s.length;l++,a++){s[l].type||a--;const t=a%this.displayColumns;i[t]||(i[t]=[]),i[t].push(s[l])}return i}},render(){const{displayGutter:t}=this,r=this.getColumnsWithChildItems(),i=parseInt(t.toString(),10)===1*t?`${t}px`:t,n={style:{display:["-webkit-box","-ms-flexbox","flex"],marginLeft:`-${i}`}},s={boxSizing:"border-box",backgroundClip:"padding-box",width:100/this.displayColumns+"%",border:"0px solid transparent",borderLeftWidth:i},l=r.map(((t,i)=>{const n={key:`${i}-${r.length}`,style:this.css?s:null,class:this.columnClass,attrs:this.columnAttr};return e(this.columnTag,n,t)}));return e(this.tag,this.css&&n,l)}});var n={install(t,e){e&&e.name?t.component(e.name||"masonry",i):t.component("masonry",i)}};export default n;
